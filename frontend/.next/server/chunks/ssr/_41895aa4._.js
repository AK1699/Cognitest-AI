module.exports=[70106,a=>{"use strict";var b=a.i(72131),c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(a,d)=>{let e=(0,b.forwardRef)(({color:e="currentColor",size:f=24,strokeWidth:g=2,absoluteStrokeWidth:h,className:i="",children:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...c,width:f,height:f,stroke:e,strokeWidth:h?24*Number(g)/Number(f):g,className:["lucide",`lucide-${a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i].join(" "),...k},[...d.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(j)?j:[j]]));return e.displayName=`${a}`,e};a.s(["default",()=>d],70106)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},36990,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(44726),f=a.i(84097),g=a.i(23292),h=a.i(15618);function i(){let{user:a,loading:i}=(0,e.useAuth)(),j=(0,d.useRouter)(),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(!0);(0,c.useEffect)(()=>{if(!i){if(!a)return void j.push("/auth/signin");o()}},[a,i]);let o=async()=>{try{let a=await f.default.get("/api/v1/organisations/");if(1===a.data.length){let b=a.data[0];localStorage.setItem("current_organisation",JSON.stringify(b)),window.dispatchEvent(new CustomEvent("organisationChanged",{detail:b})),j.push(`/organizations/${b.id}/projects`);return}let b=await Promise.all(a.data.map(async a=>{try{let[b,c]=await Promise.all([f.default.get(`/api/v1/projects/?organisation_id=${a.id}`),f.default.get(`/api/v1/organisations/${a.id}/members/`).catch(()=>({data:[]}))]);return{org:a,projectCount:b.data.length||0,userCount:c.data.length||1}}catch(b){return{org:a,projectCount:0,userCount:1}}}));l(b)}catch(a){console.error("Failed to fetch organisations:",a),g.toast.error("Failed to load organisations")}finally{n(!1)}};return i||m?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading organisations..."})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Your Organizations"}),(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Select an organization to get started"})]}),0===k.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"You don't have any organisations yet"}),(0,b.jsxs)("button",{onClick:()=>j.push("/organizations/new"),className:"inline-flex items-center px-6 py-3 rounded-lg bg-primary text-white font-medium hover:bg-primary/90 transition-colors",children:[(0,b.jsx)(h.Plus,{className:"w-5 h-5 mr-2"}),"Create Organisation"]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[k.map(({org:a,projectCount:c,userCount:d})=>(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 flex items-center justify-between hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg bg-primary/10 dark:bg-primary/20 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-sm font-semibold text-primary",children:a.name.substring(0,2).toUpperCase()})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:a.name}),(0,b.jsxs)("div",{className:"flex gap-4 text-sm text-gray-600 dark:text-gray-400",children:[(0,b.jsxs)("span",{children:[c," project",1!==c?"s":""]}),(0,b.jsxs)("span",{children:[d," user",1!==d?"s":""]})]})]})]}),(0,b.jsx)("button",{onClick:()=>{localStorage.setItem("current_organisation",JSON.stringify(a)),window.dispatchEvent(new CustomEvent("organisationChanged",{detail:a})),j.push(`/organizations/${a.id}/projects`)},className:"ml-4 flex-shrink-0 px-6 py-2 rounded-lg border-2 border-primary text-primary font-medium hover:bg-primary hover:text-white transition-colors",children:"Open"})]},a.id)),(0,b.jsxs)("button",{onClick:()=>j.push("/organizations/new"),className:"w-full py-4 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-400 font-medium hover:border-primary hover:text-primary dark:hover:text-primary transition-colors",children:[(0,b.jsx)(h.Plus,{className:"w-5 h-5 mx-auto mb-2"}),"Create new organization"]})]})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=_41895aa4._.js.map
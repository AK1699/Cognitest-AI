{"version":3,"sources":["turbopack:///[project]/frontend/lib/api/roles.ts","turbopack:///[project]/frontend/components/roles/role-assignment-modal.tsx","turbopack:///[project]/frontend/components/settings/permission-matrix.tsx","turbopack:///[project]/frontend/app/organizations/[uuid]/users-teams/page.tsx","turbopack:///[project]/node_modules/lucide-react/src/icons/pencil.ts","turbopack:///[project]/node_modules/lucide-react/src/icons/circle-plus.ts","turbopack:///[project]/frontend/lib/api/users.ts","turbopack:///[project]/frontend/lib/role-display-utils.ts"],"sourcesContent":["import api from './index'\n\nexport interface Permission {\n  id: string\n  name: string\n  description?: string\n  resource: string\n  action: string\n}\n\nexport interface ProjectRole {\n  id: string\n  name: string\n  description?: string\n  role_type: string\n  organisation_id: string\n  is_system_role: boolean\n  is_active: boolean\n  created_at: string\n  updated_at?: string\n}\n\nexport interface UserProjectRoleWithDetails {\n  id: string\n  user_id: string\n  role_id: string\n  project_id: string\n  role: ProjectRole\n  user?: {\n    username: string\n    email: string\n  }\n}\n\nexport interface GroupProjectRoleWithDetails {\n  id: string\n  group_id: string\n  role_id: string\n  project_id: string\n  role: ProjectRole\n  group?: {\n    name: string\n  }\n}\n\nexport async function listRoles(organisationId: string): Promise<{ roles: ProjectRole[] }> {\n  const response = await api.get(`/api/v1/roles/`, {\n    params: { organisation_id: organisationId }\n  })\n  return response.data\n}\n\nexport async function listUserRoles(userId: string, projectId: string): Promise<UserProjectRoleWithDetails[]> {\n  const response = await api.get(`/api/v1/roles/assignments/users`, {\n    params: { user_id: userId, project_id: projectId }\n  })\n  return response.data.assignments || []\n}\n\nexport async function listGroupRoles(groupId: string, projectId: string): Promise<GroupProjectRoleWithDetails[]> {\n  const response = await api.get(`/api/v1/roles/assignments/groups`, {\n    params: { group_id: groupId, project_id: projectId }\n  })\n  return response.data.assignments || []\n}\n\nexport async function assignRoleToUser(\n  userId: string,\n  roleId: string,\n  projectId: string\n): Promise<UserProjectRoleWithDetails> {\n  const response = await api.post('/api/v1/roles/assignments/users', {\n    user_id: userId,\n    role_id: roleId,\n    project_id: projectId\n  })\n  return response.data\n}\n\nexport async function assignRoleToGroup(\n  groupId: string,\n  roleId: string,\n  projectId: string\n): Promise<GroupProjectRoleWithDetails> {\n  const response = await api.post('/api/v1/roles/assignments/groups', {\n    group_id: groupId,\n    role_id: roleId,\n    project_id: projectId\n  })\n  return response.data\n}\n\nexport async function removeRoleFromUser(assignmentId: string): Promise<void> {\n  await api.delete(`/api/v1/roles/assignments/users/${assignmentId}`)\n}\n\nexport async function removeRoleFromGroup(assignmentId: string): Promise<void> {\n  await api.delete(`/api/v1/roles/assignments/groups/${assignmentId}`)\n}\n\nexport async function createRole(\n  organisationId: string,\n  name: string,\n  roleType: string,\n  description?: string,\n  permissions?: string[]\n): Promise<ProjectRole> {\n  const response = await api.post('/api/v1/roles/', {\n    organisation_id: organisationId,\n    name,\n    role_type: roleType,\n    description,\n    permissions: permissions || []\n  })\n  return response.data\n}\n\nexport async function deleteRole(roleId: string): Promise<void> {\n  await api.delete(`/api/v1/roles/${roleId}`)\n}\n\nexport async function listPermissions(): Promise<Permission[]> {\n  const response = await api.get('/api/v1/roles/permissions')\n  return response.data.permissions || []\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { X, Shield, Trash2, Plus, AlertCircle } from 'lucide-react'\nimport { toast } from 'sonner'\nimport { formatDateHumanReadable } from '@/lib/date-utils'\nimport { getRoleDisplayWithType } from '@/lib/role-display-utils'\nimport {\n  listRoles,\n  listUserRoles,\n  listGroupRoles,\n  assignRoleToUser,\n  assignRoleToGroup,\n  removeRoleFromUser,\n  removeRoleFromGroup,\n  type ProjectRole,\n  type UserProjectRoleWithDetails,\n  type GroupProjectRoleWithDetails\n} from '@/lib/api/roles'\n\ninterface RoleAssignmentModalProps {\n  isOpen: boolean\n  onClose: () => void\n  organisationId: string\n  projectId?: string\n  entityType: 'user' | 'group'\n  entityId: string\n  entityName: string\n  availableProjects?: Array<{ id: string; name: string }>\n  onRoleAssigned?: () => void | Promise<void>\n  onModalOpen?: () => void | Promise<void>\n}\n\nexport function RoleAssignmentModal({\n  isOpen,\n  onClose,\n  organisationId,\n  projectId: initialProjectId,\n  entityType,\n  entityId,\n  entityName,\n  availableProjects = [],\n  onRoleAssigned,\n  onModalOpen\n}: RoleAssignmentModalProps) {\n  const [loading, setLoading] = useState(false)\n  const [roles, setRoles] = useState<ProjectRole[]>([])\n  const [currentRoles, setCurrentRoles] = useState<(UserProjectRoleWithDetails | GroupProjectRoleWithDetails)[]>([])\n  const [selectedProjectId, setSelectedProjectId] = useState<string>(initialProjectId || '')\n  const [filterProjectId, setFilterProjectId] = useState<string>(initialProjectId || '')\n  const [selectedRoleId, setSelectedRoleId] = useState<string>('')\n  const [showAddRole, setShowAddRole] = useState(false)\n\n  // Fetch roles on modal open (independent of project selection)\n  useEffect(() => {\n    if (isOpen) {\n      // Call parent callback to refresh projects/data if needed\n      if (onModalOpen) {\n        onModalOpen()\n      }\n      fetchRoles()\n      fetchAllUserRoles() // Fetch all roles for this user across all projects\n    }\n  }, [isOpen, organisationId])\n\n  // Fetch current assignments when filter project changes\n  useEffect(() => {\n    if (isOpen && filterProjectId) {\n      fetchCurrentRoles()\n    }\n  }, [filterProjectId, entityId])\n\n  // Fetch all roles for this user across all projects\n  const fetchAllUserRoles = async () => {\n    try {\n      // Fetch from all projects to see where user already has roles\n      if (entityType === 'user' && availableProjects.length > 0) {\n        let allRoles: (UserProjectRoleWithDetails | GroupProjectRoleWithDetails)[] = []\n\n        for (const project of availableProjects) {\n          try {\n            const userRolesData = await listUserRoles(entityId, project.id)\n            allRoles = [...allRoles, ...userRolesData]\n          } catch (e) {\n            // Project might not have any roles for this user\n          }\n        }\n\n        setCurrentRoles(allRoles)\n      }\n    } catch (error: any) {\n      console.error('Error fetching all user roles:', error)\n    }\n  }\n\n  const fetchRoles = async () => {\n    setLoading(true)\n    try {\n      const rolesData = await listRoles(organisationId)\n      setRoles(rolesData.roles)\n    } catch (error: any) {\n      console.error('Error fetching roles:', error)\n      toast.error(error.message || 'Failed to load roles')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchCurrentRoles = async () => {\n    if (!filterProjectId) return\n\n    try {\n      // Fetch current role assignments for the selected project\n      if (entityType === 'user') {\n        const userRolesData = await listUserRoles(entityId, filterProjectId)\n        setCurrentRoles(userRolesData)\n      } else {\n        const groupRolesData = await listGroupRoles(entityId, filterProjectId)\n        setCurrentRoles(groupRolesData)\n      }\n    } catch (error: any) {\n      console.error('Error fetching current roles:', error)\n      toast.error(error.message || 'Failed to load current roles')\n    }\n  }\n\n  const handleAssignRole = async () => {\n    const selectedRole = roles.find(r => r.id === selectedRoleId)\n    const isAdminRole = selectedRole?.role_type === 'administrator'\n\n    // Admin role only needs role selection\n    // Other roles require both role and project\n    if (!selectedRoleId) return\n    if (!isAdminRole && !selectedProjectId) return\n\n    try {\n      let projectToAssign = selectedProjectId\n\n      // Get list of projects where user already has roles\n      const projectsWithRoles = new Set(\n        currentRoles.map(role => {\n          // Extract project_id from currentRoles\n          return (role as any).project_id\n        })\n      )\n\n      // For admin role, if no project selected, find a project where user doesn't already have a role\n      if (isAdminRole && !projectToAssign && availableProjects.length > 0) {\n        // Find first project without a role assignment\n        const projectWithoutRole = availableProjects.find(\n          p => !projectsWithRoles.has(p.id)\n        )\n\n        if (projectWithoutRole) {\n          projectToAssign = projectWithoutRole.id\n        } else {\n          // All projects have roles, use the first one and suggest updating\n          projectToAssign = availableProjects[0].id\n          toast.warning('User already has roles in all projects. Attempting to assign as admin role (may need to remove existing role first).')\n        }\n      }\n\n      // For non-admin roles, check if selected project already has a role\n      if (!isAdminRole && selectedProjectId && projectsWithRoles.has(selectedProjectId)) {\n        // User already has a role on this project, try to find alternative\n        const projectWithoutRole = availableProjects.find(\n          p => !projectsWithRoles.has(p.id)\n        )\n\n        if (projectWithoutRole) {\n          // Auto-switch to project without role\n          projectToAssign = projectWithoutRole.id\n          toast.info(`User already has a role on \"${availableProjects.find(p => p.id === selectedProjectId)?.name || 'selected project'}\". Assigning to \"${projectWithoutRole.name}\" instead.`)\n        } else {\n          // All projects have roles for this user\n          toast.error('User already has a role on all projects. Please remove an existing role first, or assign an admin role for organization-wide access.')\n          return\n        }\n      }\n\n      if (!projectToAssign) {\n        toast.error('Please create a project first before assigning roles')\n        return\n      }\n\n      if (entityType === 'user') {\n        await assignRoleToUser(entityId, selectedRoleId, projectToAssign)\n      } else {\n        await assignRoleToGroup(entityId, selectedRoleId, projectToAssign)\n      }\n\n      toast.success('Role assigned successfully')\n      if (isAdminRole) {\n        toast.success('‚úÖ Admin user now has automatic access to all projects in this organization')\n      }\n      setSelectedRoleId('')\n      setSelectedProjectId('')\n      setShowAddRole(false)\n      // Refresh if viewing that project\n      if (filterProjectId === projectToAssign) {\n        await fetchCurrentRoles()\n      }\n      // Call parent callback to refresh data\n      if (onRoleAssigned) {\n        await onRoleAssigned()\n      }\n    } catch (error: any) {\n      toast.error(error.response?.data?.detail || error.message || 'Failed to assign role')\n    }\n  }\n\n  const handleRemoveRole = async (assignmentId: string) => {\n    if (!confirm('Are you sure you want to remove this role assignment?')) return\n\n    try {\n      if (entityType === 'user') {\n        await removeRoleFromUser(assignmentId)\n      } else {\n        await removeRoleFromGroup(assignmentId)\n      }\n\n      toast.success('Role removed successfully')\n      // Refresh roles after removal\n      await fetchAllUserRoles()\n      if (filterProjectId) {\n        await fetchCurrentRoles()\n      }\n    } catch (error: any) {\n      toast.error(error.message || 'Failed to remove role')\n    }\n  }\n\n  const getRoleBadgeColor = (roleType: string) => {\n    switch (roleType) {\n      case 'administrator':\n        return 'bg-red-100 text-red-800 border-red-200'\n      case 'project_manager':\n        return 'bg-purple-100 text-purple-800 border-purple-200'\n      case 'developer':\n        return 'bg-blue-100 text-blue-800 border-blue-200'\n      case 'tester':\n        return 'bg-green-100 text-green-800 border-green-200'\n      case 'viewer':\n        return 'bg-gray-100 text-gray-800 border-gray-200'\n      default:\n        return 'bg-cyan-100 text-cyan-800 border-cyan-200'\n    }\n  }\n\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700\">\n          <div className=\"flex items-center gap-3\">\n            <Shield className=\"w-6 h-6 text-primary\" />\n            <div>\n              <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                Manage Roles - {entityName}\n              </h2>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                Assign and manage roles for this {entityType}\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-500\" />\n          </button>\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"text-gray-500\">Loading roles...</div>\n            </div>\n          ) : (\n            <>\n              {/* Assign Role Section - Always Visible */}\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                  Assign Role\n                </h3>\n\n                <div className=\"space-y-4\">\n                  {/* Role Selection */}\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      Select Role\n                    </label>\n                    <select\n                      value={selectedRoleId}\n                      onChange={(e) => setSelectedRoleId(e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                    >\n                      <option value=\"\">Choose a role...</option>\n                      {roles.map((role) => (\n                        <option key={role.id} value={role.id}>\n                          {getRoleDisplayWithType(role.role_type)}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n\n                  {/* Project Selection for Assignment - Hidden for Admin Role */}\n                  {selectedRoleId && (() => {\n                    const selectedRole = roles.find(r => r.id === selectedRoleId)\n                    const isAdminRole = selectedRole?.role_type === 'administrator'\n\n                    if (isAdminRole) {\n                      return (\n                        <div className=\"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg\">\n                          <div className=\"flex items-start gap-3\">\n                            <Shield className=\"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5\" />\n                            <div>\n                              <p className=\"text-sm font-semibold text-green-800 dark:text-green-200 mb-1\">\n                                Admin Role - No Project Selection Needed\n                              </p>\n                              <p className=\"text-sm text-green-700 dark:text-green-300\">\n                                Admin users automatically have full access to all projects in this organization.\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      )\n                    }\n\n                    // Get projects where user already has roles\n                    const projectsWithRoles = new Set(\n                      currentRoles.map(role => (role as any).project_id)\n                    )\n\n                    return (\n                      <div className=\"space-y-3\">\n                        <div>\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                            Select Project to Assign To\n                          </label>\n                          {availableProjects.length > 0 ? (\n                            <select\n                              value={selectedProjectId}\n                              onChange={(e) => setSelectedProjectId(e.target.value)}\n                              className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                            >\n                              <option value=\"\">Select a project...</option>\n                              {availableProjects.map((project) => (\n                                <option key={project.id} value={project.id}>\n                                  {project.name}\n                                  {projectsWithRoles.has(project.id) ? ' (already assigned)' : ''}\n                                </option>\n                              ))}\n                            </select>\n                          ) : (\n                            <div className=\"p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\n                              <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\n                                ‚ö†Ô∏è No projects available. Please create a project first before assigning roles.\n                              </p>\n                            </div>\n                          )}\n                        </div>\n\n                        {/* Warning: Projects with existing roles */}\n                        {projectsWithRoles.size > 0 && (\n                          <div className=\"p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg\">\n                            <p className=\"text-xs font-semibold text-amber-800 dark:text-amber-200 mb-2\">\n                              ‚ÑπÔ∏è User already has roles on:\n                            </p>\n                            <div className=\"flex flex-wrap gap-2\">\n                              {availableProjects\n                                .filter(p => projectsWithRoles.has(p.id))\n                                .map(p => (\n                                  <span\n                                    key={p.id}\n                                    className=\"inline-block px-2 py-1 text-xs bg-amber-200 text-amber-900 dark:bg-amber-800 dark:text-amber-100 rounded\"\n                                  >\n                                    {p.name}\n                                  </span>\n                                ))}\n                            </div>\n                            <p className=\"text-xs text-amber-700 dark:text-amber-300 mt-2\">\n                              System will automatically use a different project if you select one with an existing role.\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    )\n                  })()}\n\n\n                  {/* Role Preview */}\n                  {selectedRoleId && (\n                    <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\n                      {(() => {\n                        const selectedRole = roles.find(r => r.id === selectedRoleId)\n                        if (!selectedRole) return null\n\n                        return (\n                          <div>\n                            <div className=\"flex items-center gap-2 mb-2\">\n                              <Shield className=\"w-5 h-5 text-blue-600\" />\n                              <span className=\"font-semibold text-blue-900 dark:text-blue-100\">\n                                {selectedRole.name}\n                              </span>\n                              <span className={`px-2 py-0.5 text-xs font-semibold rounded-full border ${getRoleBadgeColor(selectedRole.role_type)}`}>\n                                {selectedRole.role_type.replace('_', ' ')}\n                              </span>\n                            </div>\n                            {selectedRole.description && (\n                              <p className=\"text-sm text-blue-700 dark:text-blue-200\">\n                                {selectedRole.description}\n                              </p>\n                            )}\n                          </div>\n                        )\n                      })()}\n                    </div>\n                  )}\n\n                  {/* Assign Button */}\n                  {(() => {\n                    const selectedRole = roles.find(r => r.id === selectedRoleId)\n                    const isAdminRole = selectedRole?.role_type === 'administrator'\n                    // Admin role only needs role selection, others need both role and project\n                    const isEnabled = selectedRoleId && (isAdminRole || selectedProjectId)\n\n                    return (\n                      <Button\n                        onClick={handleAssignRole}\n                        disabled={!isEnabled}\n                        className=\"w-full\"\n                      >\n                        Assign Role\n                      </Button>\n                    )\n                  })()}\n                </div>\n              </div>\n\n              {/* Current Role Assignments */}\n              <div className=\"border-t border-gray-200 dark:border-gray-700 pt-6\">\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-4\">\n                  Current Roles\n                </h3>\n\n                {/* Show all current roles */}\n                {currentRoles.length > 0 ? (\n                  <div className=\"space-y-3 mb-4\">\n                    {currentRoles.map((roleAssignment) => {\n                      const roleName = (roleAssignment as any).role?.name || (roleAssignment as any).role_name || 'Unknown Role'\n                      const roleType = (roleAssignment as any).role?.role_type || (roleAssignment as any).role_type || 'system'\n                      const projectId = (roleAssignment as any).project_id\n                      const projectName = availableProjects.find(p => p.id === projectId)?.name || 'Unknown Project'\n\n                      return (\n                        <div\n                          key={roleAssignment.id}\n                          className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600\"\n                        >\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <span className=\"font-medium text-gray-900 dark:text-white\">\n                                {roleName}\n                              </span>\n                              <span className={`px-2 py-0.5 text-xs font-semibold rounded-full border ${getRoleBadgeColor(roleType)}`}>\n                                {roleType.replace('_', ' ')}\n                              </span>\n                            </div>\n                            <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                              Project: {projectName}\n                            </p>\n                          </div>\n                          <button\n                            onClick={() => handleRemoveRole(roleAssignment.id)}\n                            className=\"ml-4 p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors\"\n                            title=\"Remove role\"\n                          >\n                            <Trash2 size={16} />\n                          </button>\n                        </div>\n                      )\n                    })}\n                  </div>\n                ) : (\n                  <div className=\"text-center py-8 bg-gray-50 dark:bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600\">\n                    <Shield className=\"w-12 h-12 mx-auto mb-3 text-gray-400\" />\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400\">No roles assigned yet</p>\n                  </div>\n                )}\n\n                {/* Project Filter for Viewing Specific Project Roles */}\n                {availableProjects.length > 0 && (\n                  <div className=\"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700\">\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                      View roles by project (optional)\n                    </label>\n                    <select\n                      value={filterProjectId}\n                      onChange={(e) => {\n                        setFilterProjectId(e.target.value)\n                        if (e.target.value) {\n                          fetchCurrentRoles()\n                        }\n                      }}\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                    >\n                      <option value=\"\">All projects</option>\n                      {availableProjects.map((project) => (\n                        <option key={project.id} value={project.id}>\n                          {project.name}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                )}\n\n                {filterProjectId && currentRoles.length === 0 ? (\n                  <div className=\"text-center py-8 bg-gray-50 dark:bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600\">\n                    <Shield className=\"w-12 h-12 mx-auto mb-3 text-gray-400\" />\n                    <p className=\"text-gray-500 dark:text-gray-400\">\n                      No roles assigned yet for this project\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {currentRoles.map((assignment) => (\n                      <div\n                        key={assignment.id}\n                        className=\"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600\"\n                      >\n                        <div className=\"flex items-center gap-3\">\n                          <Shield className=\"w-5 h-5 text-gray-400\" />\n                          <div>\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"font-medium text-gray-900 dark:text-white\">\n                                {(assignment as any).role?.name || (assignment as any).role_name}\n                              </span>\n                              <span className={`px-2 py-0.5 text-xs font-semibold rounded-full border ${getRoleBadgeColor((assignment as any).role?.role_type || (assignment as any).role_type)}`}>\n                                {((assignment as any).role?.role_type || (assignment as any).role_type).replace('_', ' ')}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                        <Button\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => handleRemoveRole(assignment.id)}\n                          className=\"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-end gap-2 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800\">\n          <Button variant=\"outline\" onClick={onClose}>\n            Close\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n","'use client'\n\nimport { useEffect, useState, Fragment } from 'react'\nimport api from '@/lib/api'\nimport { Loader2 } from 'lucide-react'\n\ninterface Permission {\n  id: string\n  name: string\n  resource: string\n  action: string\n  description?: string\n}\n\ninterface Role {\n  id: string\n  name: string\n  description?: string\n  permission_count?: number\n  permissions?: Permission[]\n}\n\ninterface PermissionMatrixProps {\n  organisationId: string\n  isAdmin?: boolean\n}\n\ninterface RolePermissionMap {\n  [roleId: string]: string[]\n}\n\n// Group permissions by resource for better organization\nconst PERMISSION_GROUPS = {\n  'User Management': ['user_read_access', 'user_write_access', 'user_delete_access'],\n  'Role Management': ['role_read_access', 'role_write_access', 'role_delete_access'],\n  'Project Management': ['project_read_access', 'project_write_access', 'project_delete_access'],\n  'Settings': ['settings_read_access', 'settings_write_access'],\n  'Organization': ['organization_manage_access'],\n  'Test Case Management': [\n    'test_case_read_access', 'test_case_write_access', 'test_case_delete_access', 'test_case_execute_access',\n  ],\n  'Security Testing': [\n    'security_test_read_access', 'security_test_write_access', 'security_test_delete_access', 'security_test_execute_access',\n  ],\n  'API Testing': [\n    'api_test_read_access', 'api_test_write_access', 'api_test_delete_access', 'api_test_execute_access',\n  ],\n  'Automation Hub': [\n    'automation_read_access', 'automation_write_access', 'automation_delete_access', 'automation_execute_access',\n  ],\n}\n\n// Permission matrix definition - which roles have which permissions\n// Based on role permission specification: Owner/Admin have full access, others have graduated access levels\n// NOTE: This matrix should include ALL permissions that exist in the database\nconst PERMISSION_MATRIX: Record<string, Record<string, boolean>> = {\n  // User Management\n  'user_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'user_write_access': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'user_delete_access': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  // Role Management\n  'role_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'role_write_access': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'role_delete_access': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  // Project Management\n  'project_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'project_write_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'project_delete_access': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  // Settings\n  'settings_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'settings_write_access': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  // Organization\n  'organization_manage_access': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  // Test Case Management (using newer naming convention)\n  'test_case_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'test_case_write_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'test_case_delete_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'test_case_execute_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // Test Management (alternate naming convention)\n  'read_test_management': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'write_test_management': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'manage_test_management': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'execute_test_management': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // Security Testing\n  'security_test_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'security_test_write_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'security_test_delete_access': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'security_test_execute_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // Security Testing (alternate naming)\n  'read_security_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'write_security_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'manage_security_testing': { 'owner': true, 'admin': true, 'qa_manager': false, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'execute_security_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // API Testing\n  'api_test_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'api_test_write_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'api_test_delete_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'api_test_execute_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // API Testing (alternate naming)\n  'read_api_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'write_api_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'manage_api_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'execute_api_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // Automation Hub\n  'automation_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'automation_write_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'automation_delete_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'automation_execute_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // Automation Hub (alternate naming)\n  'read_automation_hub': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'write_automation_hub': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'manage_automation_hub': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'execute_automation_hub': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // Performance Testing\n  'read_performance_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'write_performance_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'manage_performance_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'execute_performance_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'performance_test_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'performance_test_write_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'performance_test_delete_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'performance_test_execute_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  // Mobile Testing\n  'read_mobile_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'write_mobile_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'manage_mobile_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'execute_mobile_testing': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'mobile_test_read_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': true, 'viewer': true },\n  'mobile_test_write_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n  'mobile_test_delete_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': false, 'qa_engineer': false, 'product_owner': false, 'viewer': false },\n  'mobile_test_execute_access': { 'owner': true, 'admin': true, 'qa_manager': true, 'qa_lead': true, 'qa_engineer': true, 'product_owner': false, 'viewer': false },\n}\n\nexport function PermissionMatrix({ organisationId, isAdmin = false }: PermissionMatrixProps) {\n  const [roles, setRoles] = useState<Role[]>([])\n  const [permissions, setPermissions] = useState<Permission[]>([])\n  const [loading, setLoading] = useState(true)\n  const [rolePermissions, setRolePermissions] = useState<RolePermissionMap>({})\n  const [permissionGroups, setPermissionGroups] = useState<Record<string, string[]>>(PERMISSION_GROUPS)\n\n  useEffect(() => {\n    fetchData()\n  }, [organisationId])\n\n  const fetchData = async () => {\n    setLoading(true)\n    try {\n      // Fetch roles\n      const rolesResponse = await api.get('/api/v1/roles/', {\n        params: { organisation_id: organisationId }\n      })\n      const rolesList = rolesResponse.data.roles || []\n      console.log('üéØ Roles from API:', rolesList.map(r => ({\n        id: r.id,\n        name: r.name,\n        role_type: r.role_type,\n        permissions_from_api: r.permissions?.length || 0,\n        permission_count: r.permission_count\n      })))\n      setRoles(rolesList)\n\n      // Fetch dynamic permissions based on enabled modules\n      let permsList: Permission[] = []\n      try {\n        const dynamicResponse = await api.get(`/api/v1/roles/dynamic/${organisationId}`)\n        const { permission_groups, all_permissions, enabled_modules } = dynamicResponse.data\n\n        // Use dynamic permission groups if available\n        if (permission_groups) {\n          setPermissionGroups(permission_groups)\n        }\n\n        // Set enabled modules for reference\n        if (enabled_modules) {\n          setEnabledModules(enabled_modules)\n        }\n\n        // Use all permissions including dynamic ones\n        permsList = all_permissions || []\n        setPermissions(permsList)\n      } catch (dynamicError) {\n        // Fallback to static permissions if dynamic endpoint fails\n        console.warn('Could not fetch dynamic permissions, using static permissions:', dynamicError)\n        const permsResponse = await api.get('/api/v1/roles/permissions')\n        permsList = permsResponse.data.permissions || []\n        setPermissions(permsList)\n      }\n\n      // Initialize role-permission mapping based on PERMISSION_MATRIX ONLY\n      // CRITICAL: We MUST ignore any permissions from the API and use ONLY PERMISSION_MATRIX\n      const permMap: RolePermissionMap = {}\n\n      // Create a mapping of permission names to IDs for quick lookup\n      const permNameToIdMap: Record<string, string> = {}\n      permsList.forEach(perm => {\n        permNameToIdMap[perm.name] = perm.id\n      })\n\n      console.log('üîç Permission name to ID mapping:', Object.keys(permNameToIdMap).slice(0, 5))\n      console.log('üìã Total permissions found:', permsList.length)\n\n      rolesList.forEach((role: Role) => {\n        let rolePerms: string[] = []\n\n        console.log(`üîç Processing role \"${role.name}\" (${role.role_type}):`, {\n          hasPermissions: !!role.permissions,\n          permissionCount: role.permissions?.length || 0,\n          permissionIds: role.permissions?.map(p => p.id) || []\n        })\n\n        // ALWAYS use permissions from the API - this is the source of truth\n        if (role.permissions && role.permissions.length > 0) {\n          rolePerms = role.permissions.map(p => p.id)\n          console.log(`‚úÖ Role \"${role.name}\" (${role.role_type}): ${rolePerms.length} permissions from API`)\n          console.log(`   Permission IDs: ${rolePerms.slice(0, 3).join(', ')}...`)\n        } else {\n          // If no permissions from API, it means the role has NO permissions assigned\n          console.log(`‚ö†Ô∏è Role \"${role.name}\" (${role.role_type}) has NO permissions assigned in database`)\n        }\n\n        permMap[role.id] = rolePerms\n      })\n\n      // Log detailed mapping for debugging\n      console.log('üìù Detailed permission mapping:')\n      Object.entries(permMap).forEach(([roleId, permIds]) => {\n        const role = rolesList.find(r => r.id === roleId)\n        console.log(`  ${role?.name}: [${permIds.map(id => {\n          const perm = permsList.find(p => p.id === id)\n          return perm?.name || id\n        }).join(', ')}]`)\n      })\n\n      console.log('üìä Final permission map:', Object.entries(permMap).map(([roleId, perms]) => ({\n        roleId: roleId.slice(0, 8),\n        count: perms.length,\n        sampleIds: perms.slice(0, 2)\n      })))\n\n      // Set state - these are the ONLY permissions we will use\n      setRolePermissions(permMap)\n      setOriginalRolePermissions(JSON.parse(JSON.stringify(permMap)))\n    } catch (error: any) {\n      console.error('Failed to fetch data:', error)\n      toast.error('Failed to load roles and permissions')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <Loader2 className=\"w-6 h-6 animate-spin text-primary\" />\n        <span className=\"ml-2\">Loading permission matrix...</span>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n          Role Permissions Matrix\n        </h3>\n        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n          View current role permissions (read-only)\n        </p>\n      </div>\n\n\n      {/* Permission Matrix */}\n      <div className=\"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-gray-800\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full text-sm border-collapse\" style={{ tableLayout: 'fixed' }}>\n            {/* Header */}\n            <thead>\n              <tr className=\"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700\">\n                <th className=\"px-3 py-3 text-left font-semibold text-gray-900 dark:text-white sticky left-0 bg-gray-50 dark:bg-gray-900 z-10\" style={{ width: '192px' }}>\n                  Permission\n                </th>\n                {roles.map(role => (\n                  <th\n                    key={role.id}\n                    className=\"px-2 py-3 text-center font-semibold text-gray-900 dark:text-white whitespace-nowrap align-middle\"\n                    style={{ width: '120px' }}\n                  >\n                    <div className=\"truncate text-xs\" title={role.name}>\n                      {role.name}\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n\n            {/* Body */}\n            <tbody>\n              {Object.entries(permissionGroups).map(([groupName, permNames]) => {\n                return (\n                  <Fragment key={groupName}>\n                    {/* Group Header */}\n                    <tr className=\"bg-blue-50 dark:bg-blue-900/20 border-b border-gray-200 dark:border-gray-700\">\n                      <td\n                        colSpan={roles.length + 1}\n                        className=\"px-3 py-2 text-sm font-bold text-blue-900 dark:text-blue-200 sticky left-0 bg-blue-50 dark:bg-blue-900/20 z-10\"\n                      >\n                        {groupName}\n                      </td>\n                    </tr>\n\n                    {/* Permission rows */}\n                    {permNames.map((permName, idx) => {\n                      // Find the permission by name\n                      const perm = permissions.find(p => p.name === permName)\n                      if (!perm) return null\n\n                      return (\n                        <tr\n                          key={`${groupName}-${permName}-${idx}`}\n                          className=\"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50\"\n                        >\n                          <td className=\"px-3 py-3 text-gray-900 dark:text-white sticky left-0 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 z-10 align-middle\" style={{ width: '192px' }}>\n                            <div>\n                              <div className=\"font-medium text-xs truncate\" title={perm.name}>{perm.name}</div>\n                              <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5 hidden sm:block truncate\" title={perm.description || `${perm.action} ${perm.resource}`}>\n                                {perm.description || `${perm.action} ${perm.resource}`}\n                              </div>\n                            </div>\n                          </td>\n                          {roles.map(role => {\n                            const isChecked = (rolePermissions[role.id] || []).includes(perm.id)\n                            return (\n                              <td\n                                key={`${role.id}-${perm.id}`}\n                                className=\"px-2 py-3 text-center align-middle\"\n                                style={{ width: '120px' }}\n                              >\n                                <div className=\"flex items-center justify-center h-full\">\n                                  <input\n                                    type=\"checkbox\"\n                                    checked={isChecked === true}\n                                    onChange={() => {}}\n                                    className=\"w-4 h-4 accent-primary\"\n                                    disabled={true}\n                                    title=\"Permission matrix is read-only\"\n                                    data-role={role.id}\n                                    data-perm={perm.id}\n                                  />\n                                </div>\n                              </td>\n                            )\n                          })}\n                        </tr>\n                      )\n                    })}\n                  </Fragment>\n                )\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Summary */}\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3\">\n        {roles.map(role => (\n          <div\n            key={role.id}\n            className=\"p-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-800\"\n          >\n            <div className=\"text-xs font-semibold text-gray-900 dark:text-white mb-1 truncate\" title={role.name}>\n              {role.name}\n            </div>\n            <div className=\"text-xl font-bold text-blue-600 dark:text-blue-400\">\n              {(rolePermissions[role.id] || []).length}\n            </div>\n            <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n              assigned\n            </div>\n          </div>\n        ))}\n      </div>\n\n    </div>\n  )\n}\n","'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { PlusCircle, User, Users, Search, Pencil, Trash2, UserPlus, Shield, Plus } from 'lucide-react'\nimport { useParams } from 'next/navigation'\nimport { toast } from 'sonner'\nimport { formatDateHumanReadable } from '@/lib/date-utils'\nimport { getRoleType } from '@/lib/role-display-utils'\nimport { Sidebar } from '@/components/layout/sidebar'\nimport {\n  listRoles,\n  listUserRoles,\n  assignRoleToUser,\n  removeRoleFromUser,\n  createRole,\n  deleteRole,\n  listPermissions,\n  type ProjectRole,\n  type UserProjectRoleWithDetails,\n  type Permission\n} from '@/lib/api/roles'\nimport { listOrganisationUsers, type User as UserType } from '@/lib/api/users'\nimport { RoleAssignmentModal } from '@/components/roles/role-assignment-modal'\nimport { createInvitation } from '@/lib/api/invitations'\nimport { PermissionMatrix } from '@/components/settings/permission-matrix'\nimport { useAuth } from '@/lib/auth-context'\nimport api from '@/lib/api'\n\ntype Tab = 'users' | 'roles'\n\ninterface Project {\n  id: string\n  name: string\n}\n\ninterface Organisation {\n  id: string\n  name: string\n  owner_id: string\n  created_at: string\n}\n\nexport default function UsersTeamsPage() {\n  const params = useParams()\n  const organisationId = params.uuid as string\n  const { user: currentUser } = useAuth()\n\n  const [activeTab, setActiveTab] = useState<Tab>('users')\n  const [organisation, setOrganisation] = useState<Organisation | null>(null)\n  const [users, setUsers] = useState<UserType[]>([])\n  const [roles, setRoles] = useState<ProjectRole[]>([])\n  const [permissions, setPermissions] = useState<Permission[]>([])\n  const [userRoles, setUserRoles] = useState<UserProjectRoleWithDetails[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchQuery, setSearchQuery] = useState('')\n  const [projects, setProjects] = useState<Project[]>([])\n  const [userProjects, setUserProjects] = useState<Record<string, Project[]>>({})\n  const [isCurrentUserAdmin, setIsCurrentUserAdmin] = useState(false)\n\n  // Modal states\n  const [showInviteModal, setShowInviteModal] = useState(false)\n  const [showProjectAssignModal, setShowProjectAssignModal] = useState(false)\n  const [showAssignRoleModal, setShowAssignRoleModal] = useState(false)\n  const [showCreateRoleModal, setShowCreateRoleModal] = useState(false)\n  const [rolesView, setRolesView] = useState<'list' | 'matrix'>('list')\n  const [showDeleteRoleDialog, setShowDeleteRoleDialog] = useState(false)\n  const [roleToDelete, setRoleToDelete] = useState<ProjectRole | null>(null)\n  const [deletingRoleId, setDeletingRoleId] = useState<string | null>(null)\n\n  // Selected items\n  const [selectedUser, setSelectedUser] = useState<UserType | null>(null)\n  const [selectedUserForProjects, setSelectedUserForProjects] = useState<UserType | null>(null)\n  const [roleModalEntity, setRoleModalEntity] = useState<{\n    type: 'user'\n    id: string\n    name: string\n  } | null>(null)\n  const [selectedUserToAdd, setSelectedUserToAdd] = useState<string>('')\n  const [showAddMemberSection, setShowAddMemberSection] = useState(false)\n\n  // Form data\n  const [userFormData, setUserFormData] = useState({\n    email: '',\n    username: '',\n    password: '',\n    full_name: ''\n  })\n  const [roleFormData, setRoleFormData] = useState({\n    name: '',\n    roleType: '',\n    description: '',\n    selectedPermissions: [] as string[]\n  })\n\n  useEffect(() => {\n    const loadAllData = async () => {\n      try {\n        // Fetch projects first since other data depends on it\n        const projectsResponse = await api.get('/api/v1/projects/', {\n          params: { organisation_id: organisationId }\n        })\n        const projectsData = projectsResponse.data\n        setProjects(projectsData)\n\n        // Then fetch other data, passing projects as parameter\n        await Promise.all([\n          fetchDataWithProjects(projectsData),\n          fetchPermissions()\n        ])\n      } catch (error: any) {\n        console.error('Error loading data:', error)\n        toast.error('Failed to load data')\n      }\n    }\n    loadAllData()\n  }, [organisationId, activeTab])\n\n  const fetchData = async () => {\n    // This is kept for modal callbacks - it will use current state projects\n    const currentProjects = projects\n    await fetchDataWithProjects(currentProjects)\n  }\n\n  const fetchDataWithProjects = async (projectsData: Project[]) => {\n    setLoading(true)\n    try {\n      // Fetch organization details\n      const orgResponse = await api.get(`/api/v1/organisations/${organisationId}`)\n      setOrganisation(orgResponse.data)\n\n      // Determine if current user is admin\n      const isAdmin = currentUser?.is_superuser || currentUser?.id === orgResponse.data.owner_id\n      setIsCurrentUserAdmin(isAdmin)\n\n      // Fetch users\n      const usersData = await listOrganisationUsers(organisationId)\n      setUsers(usersData)\n\n      // Fetch roles\n      const rolesData = await listRoles(organisationId)\n      setRoles(rolesData.roles)\n\n      // Fetch user roles across all projects (pass projects as parameter)\n      await fetchAllUserRoles(usersData, projectsData)\n\n      // Fetch user projects for each user\n      if (usersData.length > 0) {\n        fetchAllUserProjects(usersData, projectsData)\n      }\n\n    } catch (error: any) {\n      console.error('Error fetching data:', error)\n      toast.error(error.message || 'Failed to load data')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchAllUserRoles = async (usersList: UserType[], projectsList: Project[] = projects) => {\n    try {\n      let allRoles: UserProjectRoleWithDetails[] = []\n\n      // Fetch roles for each project\n      for (const project of projectsList) {\n        try {\n          const response = await api.get(`/api/v1/roles/assignments/users`, {\n            params: { project_id: project.id }\n          })\n          if (response.data.assignments) {\n            allRoles = [...allRoles, ...response.data.assignments]\n          }\n        } catch (e) {\n          // Project might not have any roles\n        }\n      }\n\n      setUserRoles(allRoles)\n    } catch (error: any) {\n      console.error('Error fetching user roles:', error)\n    }\n  }\n\n  const getUserRole = (user: UserType): string => {\n    // If user is the organization owner, return \"Owner\"\n    if (organisation && user.id === organisation.owner_id) {\n      return 'Owner'\n    }\n    // Otherwise return \"Member\" (you can enhance this to fetch actual roles)\n    return 'Member'\n  }\n\n  const fetchAllUserProjects = async (usersList: UserType[], projectsList: Project[] = projects) => {\n    try {\n      const userProjectsMap: Record<string, Project[]> = {}\n\n      for (const user of usersList) {\n        const assignedProjects: Project[] = []\n\n        for (const project of projectsList) {\n          try {\n            const response = await api.get(`/api/v1/projects/${project.id}/members`)\n            if (response.data.some((m: any) => m.id === user.id)) {\n              assignedProjects.push(project)\n            }\n          } catch (e) {\n            // User not assigned to this project, skip\n          }\n        }\n\n        userProjectsMap[user.id] = assignedProjects\n      }\n\n      setUserProjects(userProjectsMap)\n    } catch (error: any) {\n      console.error('Error fetching user projects:', error)\n    }\n  }\n\n  const fetchUserProjects = async (userId: string) => {\n    try {\n      const assignedProjects: Project[] = []\n\n      for (const project of projects) {\n        try {\n          const response = await api.get(`/api/v1/projects/${project.id}/members`)\n          if (response.data.some((m: any) => m.id === userId)) {\n            assignedProjects.push(project)\n          }\n        } catch (e) {\n          // User not assigned to this project\n        }\n      }\n\n      setUserProjects(prev => ({ ...prev, [userId]: assignedProjects }))\n    } catch (error: any) {\n      console.error('Failed to fetch user projects:', error)\n    }\n  }\n\n  const fetchProjects = async () => {\n    try {\n      const response = await api.get('/api/v1/projects/', {\n        params: { organisation_id: organisationId }\n      })\n      console.log('Fetched projects:', response.data)\n      setProjects(response.data)\n    } catch (error: any) {\n      console.error('Error fetching projects:', error)\n      toast.error('Failed to fetch projects: ' + (error.response?.data?.detail || error.message))\n    }\n  }\n\n  const fetchPermissions = async () => {\n    try {\n      const permissionsData = await listPermissions()\n      setPermissions(permissionsData)\n    } catch (error: any) {\n      console.error('Error fetching permissions:', error)\n    }\n  }\n\n  const handleInviteUser = async () => {\n    if (!userFormData.email) {\n      toast.error('Email address is required')\n      return\n    }\n\n    try {\n      await createInvitation({\n        email: userFormData.email,\n        full_name: userFormData.full_name || undefined,\n        organisation_id: organisationId,\n        expiry_days: 7\n      })\n\n      toast.success(`Invitation sent to ${userFormData.email}`)\n      setShowInviteModal(false)\n      setUserFormData({ email: '', username: '', password: '', full_name: '' })\n\n      // Refresh data to show pending invitations\n      fetchData()\n    } catch (error: any) {\n      console.error('Failed to send invitation:', error)\n      toast.error(error.response?.data?.detail || 'Failed to send invitation')\n    }\n  }\n\n  const openProjectAssignmentModal = (user: UserType) => {\n    setSelectedUserForProjects(user)\n    setShowProjectAssignModal(true)\n  }\n\n  const handleAssignToProject = async (projectId: string) => {\n    if (!selectedUserForProjects) return\n\n    try {\n      await api.post(`/api/v1/projects/${projectId}/members`, null, {\n        params: { user_id: selectedUserForProjects.id }\n      })\n      toast.success(`${selectedUserForProjects.username} assigned to project`)\n      // Refresh user projects\n      await fetchUserProjects(selectedUserForProjects.id)\n    } catch (error: any) {\n      console.error('Failed to assign user:', error)\n      toast.error(error.response?.data?.detail || 'Failed to assign user')\n    }\n  }\n\n  const handleRemoveFromProject = async (projectId: string) => {\n    if (!selectedUserForProjects) return\n\n    if (!confirm(`Remove ${selectedUserForProjects.username} from this project?`)) return\n\n    try {\n      await api.delete(\n        `/api/v1/projects/${projectId}/members/${selectedUserForProjects.id}`\n      )\n      toast.success('User removed from project')\n      // Refresh user projects\n      await fetchUserProjects(selectedUserForProjects.id)\n    } catch (error: any) {\n      console.error('Failed to remove user:', error)\n      toast.error(error.response?.data?.detail || 'Failed to remove user')\n    }\n  }\n\n  const handleCreateRole = async () => {\n    if (!roleFormData.name || !roleFormData.roleType) {\n      toast.error('Please fill in all required fields')\n      return\n    }\n\n    try {\n      await createRole(\n        organisationId,\n        roleFormData.name,\n        roleFormData.roleType,\n        roleFormData.description,\n        roleFormData.selectedPermissions\n      )\n      toast.success('Role created successfully')\n      setShowCreateRoleModal(false)\n      setRoleFormData({ name: '', roleType: '', description: '', selectedPermissions: [] })\n      fetchData()\n    } catch (error: any) {\n      console.error('Failed to create role:', error)\n      toast.error(error.response?.data?.detail || 'Failed to create role')\n    }\n  }\n\n  const handleDeleteRole = async (role: ProjectRole) => {\n    // Check if it's a system role\n    if (role.is_system_role) {\n      toast.error('Cannot delete system roles')\n      return\n    }\n\n    setRoleToDelete(role)\n    setShowDeleteRoleDialog(true)\n  }\n\n  const confirmDeleteRole = async () => {\n    if (!roleToDelete) return\n\n    setDeletingRoleId(roleToDelete.id)\n    try {\n      await deleteRole(roleToDelete.id)\n      toast.success(`Role \"${roleToDelete.name}\" deleted successfully`)\n      setShowDeleteRoleDialog(false)\n      setRoleToDelete(null)\n      fetchData()\n    } catch (error: any) {\n      console.error('Failed to delete role:', error)\n      toast.error(error.response?.data?.detail || 'Failed to delete role')\n    } finally {\n      setDeletingRoleId(null)\n    }\n  }\n\n  const filteredUsers = users.filter(user =>\n    user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    user.username.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    (user.full_name && user.full_name.toLowerCase().includes(searchQuery.toLowerCase()))\n  )\n\n  const filteredRoles = roles\n    .filter(role =>\n      role.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      role.role_type.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      (role.description && role.description.toLowerCase().includes(searchQuery.toLowerCase()))\n    )\n    .sort((a, b) => a.name.localeCompare(b.name))\n\n  if (loading) {\n    return (\n      <div className=\"flex min-h-screen\">\n        <Sidebar organisationId={organisationId} />\n        <div className=\"flex-1 flex items-center justify-center bg-white\">\n          <div className=\"text-center\">\n            <div className=\"text-gray-500\">Loading...</div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex min-h-screen bg-white\">\n      <Sidebar organisationId={organisationId} />\n      <div className=\"flex-1 p-8\">\n      <div className=\"flex items-center gap-4 mb-2\">\n        <div className=\"w-16 h-16 bg-primary rounded-2xl flex items-center justify-center flex-shrink-0\">\n          <Users className=\"w-8 h-8 text-white\" />\n        </div>\n        <h1 className=\"text-4xl font-bold text-gray-900\">Users & Teams</h1>\n      </div>\n      <p className=\"text-lg text-gray-600 mb-8 mt-4\">Manage user access, teams, and role assignments</p>\n\n      <div className=\"flex items-center justify-end mb-8\">\n        <div className=\"flex gap-2\">\n          {activeTab === 'users' && (\n            <Button onClick={() => setShowInviteModal(true)}>\n              <PlusCircle className=\"mr-2 h-4 w-4\" />\n              Invite User\n            </Button>\n          )}\n          {activeTab === 'roles' && (\n            <Button onClick={() => setShowCreateRoleModal(true)}>\n              <Shield className=\"mr-2 h-4 w-4\" />\n              Create Role\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"border-b border-gray-200 mb-6\">\n        <nav className=\"-mb-px flex space-x-8\">\n          <button\n            onClick={() => setActiveTab('users')}\n            className={`${\n              activeTab === 'users'\n                ? 'border-primary text-primary'\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n            } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2`}\n          >\n            <User className=\"w-4 h-4\" />\n            Users ({users.length})\n          </button>\n          <button\n            onClick={() => setActiveTab('roles')}\n            className={`${\n              activeTab === 'roles'\n                ? 'border-primary text-primary'\n                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n            } whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2`}\n          >\n            <Shield className=\"w-4 h-4\" />\n            Roles ({roles.length})\n          </button>\n        </nav>\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"mb-6 flex gap-3\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5\" />\n          <input\n            type=\"text\"\n            placeholder={`Search ${activeTab}...`}\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent bg-white dark:bg-gray-800 text-gray-900 dark:text-white\"\n          />\n        </div>\n      </div>\n\n      {/* Users Tab Content */}\n      {activeTab === 'users' && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm text-left text-gray-500 dark:text-gray-400\">\n              <thead className=\"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400\">\n                <tr>\n                  <th scope=\"col\" className=\"px-6 py-3\">User</th>\n                  <th scope=\"col\" className=\"px-6 py-3\">Role</th>\n                  <th scope=\"col\" className=\"px-6 py-3\">Projects</th>\n                  <th scope=\"col\" className=\"px-6 py-3\">Created</th>\n                  <th scope=\"col\" className=\"px-6 py-3 text-center\">Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredUsers.length === 0 ? (\n                  <tr>\n                    <td colSpan={5} className=\"px-6 py-8 text-center text-gray-500\">\n                      No users found. Invite users to get started.\n                    </td>\n                  </tr>\n                ) : (\n                  filteredUsers.map((user) => (\n                    <tr key={user.id} className=\"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\">\n                      <td className=\"px-6 py-4\">\n                        <div className=\"flex items-center\">\n                          <div className=\"h-10 w-10 flex-shrink-0\">\n                            <div className=\"h-10 w-10 rounded-full bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center\">\n                              <span className=\"text-sm font-semibold text-white\">\n                                {user.username.substring(0, 2).toUpperCase()}\n                              </span>\n                            </div>\n                          </div>\n                          <div className=\"ml-4\">\n                            <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{user.full_name || user.username}</div>\n                            <div className=\"text-sm text-gray-500 dark:text-gray-400\">{user.email}</div>\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        {(() => {\n                          const userRolesList = userRoles.filter(ur => ur.user_id === user.id)\n                          if (userRolesList.length === 0) {\n                            return <span className=\"text-sm text-gray-500 dark:text-gray-400\">No roles</span>\n                          }\n\n                          // Deduplicate roles by name\n                          const uniqueRoles = Array.from(\n                            new Map(\n                              userRolesList.map(ur => {\n                                const roleName = (ur as any).role?.name || (ur as any).role_name || 'Unknown Role'\n                                return [roleName, ur]\n                              })\n                            ).values()\n                          )\n\n                          return (\n                            <div className=\"flex flex-wrap gap-1\">\n                              {uniqueRoles.map(ur => (\n                                <span\n                                  key={ur.id}\n                                  className=\"inline-block px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded\"\n                                >\n                                  {(ur as any).role?.name || (ur as any).role_name || 'Unknown Role'}\n                                </span>\n                              ))}\n                            </div>\n                          )\n                        })()}\n                      </td>\n                      <td className=\"px-6 py-4\">\n                        <div className=\"space-y-1\">\n                          {(() => {\n                            // Check if user is an Admin\n                            const hasAdminRole = userRoles.some(\n                              ur => ur.user_id === user.id &&\n                                ((ur as any).role?.name === 'Admin' || (ur as any).role_name === 'Admin')\n                            )\n\n                            if (hasAdminRole) {\n                              return (\n                                <div className=\"flex items-center gap-2 px-3 py-2 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800\">\n                                  <Shield className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\n                                  <span className=\"text-sm font-medium text-green-800 dark:text-green-200\">\n                                    All projects (auto)\n                                  </span>\n                                </div>\n                              )\n                            }\n\n                            if ((userProjects[user.id] || []).length > 0) {\n                              return (\n                                <div className=\"flex flex-wrap gap-1\">\n                                  {(userProjects[user.id] || []).map(project => (\n                                    <span\n                                      key={project.id}\n                                      className=\"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded\"\n                                    >\n                                      {project.name}\n                                    </span>\n                                  ))}\n                                </div>\n                              )\n                            }\n\n                            return (\n                              <span className=\"text-sm text-gray-500 dark:text-gray-400\">No projects</span>\n                            )\n                          })()}\n                          <button\n                            onClick={() => openProjectAssignmentModal(user)}\n                            className=\"text-xs text-primary hover:underline flex items-center gap-1 mt-1\"\n                          >\n                            <Plus className=\"w-3 h-3\" />\n                            Manage Projects\n                          </button>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 text-sm text-gray-500\">\n                        {formatDateHumanReadable(user.created_at)}\n                      </td>\n                      <td className=\"px-6 py-4 flex justify-center items-center\">\n                        <button\n                          onClick={() => {\n                            setRoleModalEntity({\n                              type: 'user',\n                              id: user.id,\n                              name: user.full_name || user.username\n                            })\n                            setShowAssignRoleModal(true)\n                          }}\n                          className=\"flex items-center gap-1 px-3 py-2 rounded-lg text-blue-600 bg-blue-50 hover:bg-blue-100 dark:text-blue-400 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 transition-colors\"\n                        >\n                          <Pencil className=\"w-4 h-4\" />\n                          Edit Roles\n                        </button>\n                      </td>\n                    </tr>\n                  ))\n                )}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      )}\n\n      {/* Roles Tab Content */}\n      {activeTab === 'roles' && (\n        <div>\n          {/* Roles Tab Sub-navigation */}\n          <div className=\"mb-6 flex gap-4 border-b border-gray-200 dark:border-gray-700\">\n            <button\n              onClick={() => setRolesView('list')}\n              className={`py-3 px-4 text-sm font-medium border-b-2 transition-colors ${\n                rolesView === 'list'\n                  ? 'border-primary text-primary'\n                  : 'border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n              }`}\n            >\n              üìã Roles List\n            </button>\n            <button\n              onClick={() => setRolesView('matrix')}\n              className={`py-3 px-4 text-sm font-medium border-b-2 transition-colors ${\n                rolesView === 'matrix'\n                  ? 'border-primary text-primary'\n                  : 'border-transparent text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white'\n              }`}\n            >\n              üîê Permission Matrix\n            </button>\n          </div>\n\n          {/* Roles List View */}\n          {rolesView === 'list' && (\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-sm text-left text-gray-500 dark:text-gray-400\">\n                  <thead className=\"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400\">\n                    <tr>\n                      <th scope=\"col\" className=\"px-6 py-3\">Role Name</th>\n                      <th scope=\"col\" className=\"px-6 py-3\">Type</th>\n                      <th scope=\"col\" className=\"px-6 py-3\">Description</th>\n                      <th scope=\"col\" className=\"px-6 py-3\">Status</th>\n                      <th scope=\"col\" className=\"px-6 py-3\">System Role</th>\n                      <th scope=\"col\" className=\"px-6 py-3\">Created</th>\n                      <th scope=\"col\" className=\"px-6 py-3\">Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {filteredRoles.length === 0 ? (\n                      <tr>\n                        <td colSpan={7} className=\"px-6 py-8 text-center text-gray-500\">\n                          No roles found. {roles.length === 0 ? 'Initialize default roles or create a custom role to get started.' : 'Try adjusting your search.'}\n                        </td>\n                      </tr>\n                    ) : (\n                      filteredRoles.map((role) => (\n                        <tr key={role.id} className=\"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600\">\n                          <td className=\"px-6 py-4\">\n                            <div className=\"font-medium text-gray-900 dark:text-white\">{role.name}</div>\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            <span className=\"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800\">\n                              {getRoleType(role.role_type)}\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            <div className=\"text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate\">\n                              {role.description || '-'}\n                            </div>\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                              role.is_active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                            }`}>\n                              {role.is_active ? 'Active' : 'Inactive'}\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4\">\n                            <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                              role.is_system_role ? 'bg-purple-100 text-purple-800' : 'bg-gray-100 text-gray-800'\n                            }`}>\n                              {role.is_system_role ? 'System' : 'Custom'}\n                            </span>\n                          </td>\n                          <td className=\"px-6 py-4 text-sm text-gray-500\">\n                            {formatDateHumanReadable(role.created_at)}\n                          </td>\n                          <td className=\"px-6 py-4 text-sm\">\n                            <button\n                              onClick={() => handleDeleteRole(role)}\n                              disabled={role.is_system_role || deletingRoleId === role.id}\n                              className=\"inline-flex items-center gap-2 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors\"\n                              title={role.is_system_role ? 'Cannot delete system roles' : 'Delete role'}\n                            >\n                              <Trash2 size={16} />\n                              {deletingRoleId === role.id ? 'Deleting...' : 'Delete'}\n                            </button>\n                          </td>\n                        </tr>\n                      ))\n                    )}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          )}\n\n          {/* Permission Matrix View */}\n          {rolesView === 'matrix' && (\n            <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-8\">\n              <PermissionMatrix organisationId={organisationId} isAdmin={isCurrentUserAdmin} />\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Add User Modal */}\n      {showInviteModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6\">\n            <h2 className=\"text-xl font-bold mb-4\">üìß Invite User</h2>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-6\">\n              Send an invitation email. The user will receive a welcome email with a link to create their account and join your organization.\n            </p>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Email Address <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"email\"\n                  value={userFormData.email}\n                  onChange={(e) => setUserFormData({ ...userFormData, email: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"user@example.com\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Full Name (Optional)\n                </label>\n                <input\n                  type=\"text\"\n                  value={userFormData.full_name}\n                  onChange={(e) => setUserFormData({ ...userFormData, full_name: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"John Doe\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  This will be pre-filled in the invitation email\n                </p>\n              </div>\n\n              <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3\">\n                <p className=\"text-xs text-blue-700 dark:text-blue-300\">\n                  üí° The invitation will expire in <strong>7 days</strong>. The user will choose their username and password when they accept the invitation.\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-2 mt-6\">\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setShowInviteModal(false)\n                  setUserFormData({ email: '', username: '', password: '', full_name: '' })\n                }}\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={handleInviteUser}\n                disabled={!userFormData.email}\n              >\n                Send Invitation\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Create Role Modal */}\n      {showCreateRoleModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto\">\n            <h2 className=\"text-xl font-bold mb-4\">Create Custom Role</h2>\n            <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-6\">\n              Create a custom role with specific permissions for your organization.\n            </p>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Role Name <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  value={roleFormData.name}\n                  onChange={(e) => setRoleFormData({ ...roleFormData, name: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"e.g., QA Lead\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Role Type <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  value={roleFormData.roleType}\n                  onChange={(e) => setRoleFormData({ ...roleFormData, roleType: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  placeholder=\"e.g., qa_lead (lowercase, underscores)\"\n                />\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\n                  Use lowercase letters and underscores only (e.g., qa_lead, senior_qa_engineer)\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\n                  Description\n                </label>\n                <textarea\n                  value={roleFormData.description}\n                  onChange={(e) => setRoleFormData({ ...roleFormData, description: e.target.value })}\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\n                  rows={3}\n                  placeholder=\"Describe the responsibilities and access level of this role...\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\n                  Permissions (Optional)\n                </label>\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mb-3\">\n                  Select permissions by module. Each module has READ, WRITE, EXECUTE, and MANAGE permission levels.\n                </p>\n                <div className=\"border border-gray-300 dark:border-gray-600 rounded-md p-4 max-h-96 overflow-y-auto\">\n                  {permissions.length === 0 ? (\n                    <p className=\"text-sm text-gray-500 text-center py-4\">\n                      No permissions available. Run the module permissions initialization script first.\n                    </p>\n                  ) : (\n                    <div className=\"space-y-4\">\n                      {(() => {\n                        // Group permissions by module\n                        const moduleGroups = permissions.reduce((acc, permission) => {\n                          const module = permission.resource\n                          if (!acc[module]) {\n                            acc[module] = []\n                          }\n                          acc[module].push(permission)\n                          return acc\n                        }, {} as Record<string, typeof permissions>)\n\n                        // Module display names and icons\n                        const moduleConfig: Record<string, { name: string; icon: string; color: string }> = {\n                          automation_hub: { name: 'Automation Hub', icon: 'ü§ñ', color: 'blue' },\n                          api_testing: { name: 'API Testing', icon: 'üîå', color: 'green' },\n                          test_management: { name: 'Test Management', icon: 'üìã', color: 'purple' },\n                          security_testing: { name: 'Security Testing', icon: 'üîí', color: 'red' },\n                          performance_testing: { name: 'Performance Testing', icon: '‚ö°', color: 'yellow' },\n                          mobile_testing: { name: 'Mobile Testing', icon: 'üì±', color: 'indigo' },\n                        }\n\n                        // Sort modules\n                        const sortedModules = Object.keys(moduleGroups).sort((a, b) => {\n                          const order = ['automation_hub', 'api_testing', 'test_management', 'security_testing', 'performance_testing', 'mobile_testing']\n                          return order.indexOf(a) - order.indexOf(b)\n                        })\n\n                        return sortedModules.map((module) => {\n                          const config = moduleConfig[module] || { name: module, icon: 'üì¶', color: 'gray' }\n                          const modulePerms = moduleGroups[module].sort((a, b) => {\n                            const order = ['read', 'write', 'execute', 'manage']\n                            return order.indexOf(a.action) - order.indexOf(b.action)\n                          })\n\n                          const colorClasses = {\n                            blue: 'bg-blue-50 border-blue-200 dark:bg-blue-900/20 dark:border-blue-800',\n                            green: 'bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800',\n                            purple: 'bg-purple-50 border-purple-200 dark:bg-purple-900/20 dark:border-purple-800',\n                            red: 'bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800',\n                            yellow: 'bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800',\n                            indigo: 'bg-indigo-50 border-indigo-200 dark:bg-indigo-900/20 dark:border-indigo-800',\n                            gray: 'bg-gray-50 border-gray-200 dark:bg-gray-900/20 dark:border-gray-800',\n                          }\n\n                          return (\n                            <div key={module} className={`border rounded-lg p-3 ${colorClasses[config.color as keyof typeof colorClasses]}`}>\n                              <div className=\"flex items-center gap-2 mb-3\">\n                                <span className=\"text-xl\">{config.icon}</span>\n                                <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n                                  {config.name}\n                                </h4>\n                                <span className=\"ml-auto text-xs text-gray-500 dark:text-gray-400\">\n                                  {modulePerms.filter(p => roleFormData.selectedPermissions.includes(p.id)).length}/{modulePerms.length} selected\n                                </span>\n                              </div>\n                              <div className=\"space-y-2\">\n                                {modulePerms.map((permission) => (\n                                  <label\n                                    key={permission.id}\n                                    className=\"flex items-start gap-2 p-2 hover:bg-white/50 dark:hover:bg-gray-800/50 rounded cursor-pointer\"\n                                  >\n                                    <input\n                                      type=\"checkbox\"\n                                      checked={roleFormData.selectedPermissions.includes(permission.id)}\n                                      onChange={(e) => {\n                                        if (e.target.checked) {\n                                          setRoleFormData({\n                                            ...roleFormData,\n                                            selectedPermissions: [...roleFormData.selectedPermissions, permission.id]\n                                          })\n                                        } else {\n                                          setRoleFormData({\n                                            ...roleFormData,\n                                            selectedPermissions: roleFormData.selectedPermissions.filter(id => id !== permission.id)\n                                          })\n                                        }\n                                      }}\n                                      className=\"mt-1 h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded\"\n                                    />\n                                    <div className=\"flex-1 min-w-0\">\n                                      <div className=\"text-sm font-medium text-gray-900 dark:text-white flex items-center gap-2\">\n                                        <span className=\"uppercase text-xs px-2 py-0.5 bg-white dark:bg-gray-700 rounded font-semibold\">\n                                          {permission.action}\n                                        </span>\n                                        <span className=\"truncate text-xs\">{permission.name}</span>\n                                      </div>\n                                      {permission.description && (\n                                        <div className=\"text-xs text-gray-600 dark:text-gray-400 mt-1\">\n                                          {permission.description}\n                                        </div>\n                                      )}\n                                    </div>\n                                  </label>\n                                ))}\n                              </div>\n                            </div>\n                          )\n                        })\n                      })()}\n                    </div>\n                  )}\n                </div>\n                {roleFormData.selectedPermissions.length > 0 && (\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-2\">\n                    ‚úÖ {roleFormData.selectedPermissions.length} permission(s) selected across {\n                      new Set(permissions.filter(p => roleFormData.selectedPermissions.includes(p.id)).map(p => p.resource)).size\n                    } module(s)\n                  </p>\n                )}\n              </div>\n            </div>\n\n            <div className=\"flex justify-end gap-2 mt-6\">\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  setShowCreateRoleModal(false)\n                  setRoleFormData({ name: '', roleType: '', description: '', selectedPermissions: [] })\n                }}\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={handleCreateRole}\n                disabled={!roleFormData.name || !roleFormData.roleType}\n              >\n                Create Role\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Project Assignment Modal */}\n      {showProjectAssignModal && selectedUserForProjects && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">\n                  Manage Projects for {selectedUserForProjects.full_name || selectedUserForProjects.username}\n                </h2>\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                  Assign or remove this user from projects in your organization\n                </p>\n              </div>\n            </div>\n\n            <div className=\"space-y-3\">\n              {projects.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500\">\n                  No projects available. Create a project first.\n                </div>\n              ) : (\n                projects.map((project) => {\n                  const isAssigned = (userProjects[selectedUserForProjects.id] || [])\n                    .some(p => p.id === project.id)\n\n                  return (\n                    <div\n                      key={project.id}\n                      className={`flex items-center justify-between p-4 border rounded-lg transition-colors ${\n                        isAssigned\n                          ? 'border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20'\n                          : 'border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50'\n                      }`}\n                    >\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2\">\n                          <div className=\"font-medium text-gray-900 dark:text-white\">\n                            {project.name}\n                          </div>\n                          {isAssigned && (\n                            <span className=\"px-2 py-0.5 text-xs bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-200 rounded-full\">\n                              Assigned\n                            </span>\n                          )}\n                        </div>\n                        {project.description && (\n                          <div className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                            {project.description}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"ml-4\">\n                        {isAssigned ? (\n                          <button\n                            onClick={() => handleRemoveFromProject(project.id)}\n                            className=\"px-4 py-2 text-sm bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/30 transition-colors font-medium\"\n                          >\n                            Remove\n                          </button>\n                        ) : (\n                          <button\n                            onClick={() => handleAssignToProject(project.id)}\n                            className=\"px-4 py-2 text-sm bg-primary text-white rounded-lg hover:opacity-90 transition-opacity font-medium\"\n                          >\n                            Assign\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  )\n                })\n              )}\n            </div>\n\n            <div className=\"flex items-center justify-between mt-6 pt-4 border-t border-gray-200 dark:border-gray-700\">\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\n                {(userProjects[selectedUserForProjects.id] || []).length} of {projects.length} projects assigned\n              </div>\n              <button\n                onClick={() => {\n                  setShowProjectAssignModal(false)\n                  setSelectedUserForProjects(null)\n                }}\n                className=\"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Role Assignment Modal */}\n      {showAssignRoleModal && roleModalEntity && (\n        <RoleAssignmentModal\n          isOpen={showAssignRoleModal}\n          onClose={() => {\n            setShowAssignRoleModal(false)\n            setRoleModalEntity(null)\n            fetchData() // Refresh data after role changes\n          }}\n          organisationId={organisationId}\n          entityType={roleModalEntity.type}\n          entityId={roleModalEntity.id}\n          entityName={roleModalEntity.name}\n          availableProjects={projects}\n          onRoleAssigned={fetchData} // Refresh data immediately after role assignment\n          onModalOpen={async () => {\n            // Refresh projects when modal opens to ensure latest projects are available\n            try {\n              const projectsResponse = await api.get('/api/v1/projects/', {\n                params: { organisation_id: organisationId }\n              })\n              setProjects(projectsResponse.data)\n            } catch (error) {\n              console.error('Error refreshing projects:', error)\n            }\n          }}\n        />\n      )}\n\n      {/* Delete Role Confirmation Dialog */}\n      {showDeleteRoleDialog && roleToDelete && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/20\">\n                <Trash2 className=\"h-6 w-6 text-red-600 dark:text-red-400\" />\n              </div>\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Delete Role</h3>\n              </div>\n            </div>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-6\">\n              Are you sure you want to delete the role <strong>{roleToDelete.name}</strong>? This action cannot be undone.\n            </p>\n            <div className=\"flex gap-3 justify-end\">\n              <button\n                onClick={() => {\n                  setShowDeleteRoleDialog(false)\n                  setRoleToDelete(null)\n                }}\n                disabled={deletingRoleId !== null}\n                className=\"px-4 py-2 text-sm font-medium border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={confirmDeleteRole}\n                disabled={deletingRoleId !== null}\n                className=\"px-4 py-2 text-sm font-medium bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n              >\n                {deletingRoleId === roleToDelete.id ? (\n                  <>\n                    <span className=\"animate-spin\">‚è≥</span>\n                    Deleting...\n                  </>\n                ) : (\n                  <>\n                    <Trash2 size={16} />\n                    Delete Role\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      </div>\n    </div>\n  )\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Pencil\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTcgM2EyLjg1IDIuODMgMCAxIDEgNCA0TDcuNSAyMC41IDIgMjJsMS41LTUuNVoiIC8+CiAgPHBhdGggZD0ibTE1IDUgNCA0IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/pencil\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pencil = createLucideIcon('Pencil', [\n  ['path', { d: 'M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z', key: '5qss01' }],\n  ['path', { d: 'm15 5 4 4', key: '1mk7zo' }],\n]);\n\nexport default Pencil;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name CirclePlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOCAxMmg4IiAvPgogIDxwYXRoIGQ9Ik0xMiA4djgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/circle-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst CirclePlus = createLucideIcon('CirclePlus', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M8 12h8', key: '1wcyev' }],\n  ['path', { d: 'M12 8v8', key: 'napkw2' }],\n]);\n\nexport default CirclePlus;\n","import api from './index'\n\nexport interface User {\n  id: string\n  username: string\n  email: string\n  full_name?: string\n  is_active: boolean\n  created_at: string\n  updated_at?: string\n}\n\nexport async function listOrganisationUsers(organisationId: string): Promise<User[]> {\n  const response = await api.get(`/api/v1/organisations/${organisationId}/users`)\n  return response.data\n}\n\nexport async function getUserById(userId: string): Promise<User> {\n  const response = await api.get(`/api/v1/users/${userId}`)\n  return response.data\n}\n\nexport async function updateUser(userId: string, data: Partial<User>): Promise<User> {\n  const response = await api.put(`/api/v1/users/${userId}`, data)\n  return response.data\n}\n\nexport async function deleteUser(userId: string): Promise<void> {\n  await api.delete(`/api/v1/users/${userId}`)\n}\n","/**\n * Centralized utility for role display names and type mappings\n * This ensures consistency across all UI components when displaying roles\n */\n\nexport interface RoleDisplayInfo {\n  displayName: string\n  type: string\n  description: string\n}\n\n/**\n * Map from role_type to display information\n * This is the single source of truth for how roles are displayed throughout the application\n */\nexport const ROLE_DISPLAY_MAP: Record<string, RoleDisplayInfo> = {\n  owner: {\n    displayName: 'Owner',\n    type: 'Super Administrator',\n    description: 'Has full control ‚Äî can manage billing, delete the organization, assign roles, and configure SSO'\n  },\n  admin: {\n    displayName: 'Admin',\n    type: 'Administration',\n    description: 'Manages organization settings, users, integrations, and platform operations'\n  },\n  qa_manager: {\n    displayName: 'QA Manager',\n    type: 'Quality Assurance',\n    description: 'Manages QA teams, assigns testers, oversees test execution, and reviews results'\n  },\n  qa_lead: {\n    displayName: 'QA Lead',\n    type: 'Quality Assurance',\n    description: 'Leads QA engineers, approves test cases, and validates AI-generated fixes'\n  },\n  qa_engineer: {\n    displayName: 'QA Engineer',\n    type: 'Quality Assurance',\n    description: 'Creates, executes, and maintains automated and manual tests'\n  },\n  product_owner: {\n    displayName: 'Product Owner',\n    type: 'Stakeholder',\n    description: 'Represents business interests, reviews reports and KPIs, ensures testing aligns with product goals'\n  },\n  viewer: {\n    displayName: 'Viewer',\n    type: 'Read Only',\n    description: 'Has view-only access to dashboards, reports, and analytics'\n  }\n}\n\n/**\n * Get display name for a role type\n * Example: 'qa_engineer' -> 'QA Engineer (Tester)'\n */\nexport function getRoleDisplayName(roleType: string): string {\n  const info = ROLE_DISPLAY_MAP[roleType.toLowerCase()]\n  if (info) {\n    return info.displayName\n  }\n  // Fallback for unknown types\n  return roleType.replace(/_/g, ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')\n}\n\n/**\n * Get type/category for a role type\n * Example: 'qa_engineer' -> 'Quality Assurance'\n */\nexport function getRoleType(roleType: string): string {\n  const info = ROLE_DISPLAY_MAP[roleType.toLowerCase()]\n  if (info) {\n    return info.type\n  }\n  return 'Unknown'\n}\n\n/**\n * Get description for a role type\n * Example: 'qa_engineer' -> 'Creates, executes, and maintains automated and manual tests'\n */\nexport function getRoleDescription(roleType: string): string {\n  const info = ROLE_DISPLAY_MAP[roleType.toLowerCase()]\n  if (info) {\n    return info.description\n  }\n  return ''\n}\n\n/**\n * Get display info with dropdown-friendly format\n * Example: 'qa_engineer' -> 'QA Engineer (Quality Assurance)'\n */\nexport function getRoleDisplayWithType(roleType: string): string {\n  const info = ROLE_DISPLAY_MAP[roleType.toLowerCase()]\n  if (info) {\n    return `${info.displayName} (${info.type})`\n  }\n  return getRoleDisplayName(roleType)\n}\n\n/**\n * Get all role display options for dropdown/select lists\n */\nexport function getAllRoleDisplayOptions() {\n  return Object.entries(ROLE_DISPLAY_MAP).map(([roleType, info]) => ({\n    roleType,\n    displayName: info.displayName,\n    type: info.type,\n    description: info.description,\n    displayWithType: `${info.displayName} (${info.type})`\n  }))\n}\n"],"names":[],"mappings":"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","ignoreList":[4,5]}
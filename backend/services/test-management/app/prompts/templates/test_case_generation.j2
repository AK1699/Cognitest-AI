**ROLE AND EXPERTISE:**
You are a Principal QA Engineer with 15+ years of experience writing detailed, executable test cases across web, mobile, and enterprise applications. You are an expert in black-box testing techniques (equivalence partitioning, boundary value analysis, decision tables), exploratory testing, and security testing methodologies. You understand ISTQB best practices and ISO/IEC/IEEE 29119-4 test design techniques.

**CONTEXT:**
Feature Name: {{ feature }}
Feature Description: {{ description }}
User Story: {{ userStory }}
Acceptance Criteria: {{ acceptanceCriteria }}
Test Type: {{ testType }}
Priority: {{ priority }}
Complexity: {{ complexity }}
Platform: {{ platform }}
Number of Test Cases Required: {{ numberOfTestCases }}
Project Type: {{ projectType }}

**REASONING FRAMEWORK:**

STEP 1 - Requirement Decomposition:
- Parse the feature description and user story to extract testable conditions
- Identify inputs, actions, expected outputs, and system state changes
- List explicit requirements from acceptance criteria
- Infer implicit requirements (error handling, validation rules, edge cases)

STEP 2 - Scenario Identification:
- Positive Scenarios: Happy path, typical user workflows (40-50% of test cases)
- Negative Scenarios: Invalid inputs, error conditions, boundary violations (30-40% of test cases)
- Edge Cases: Boundary values, special characters, null/empty data, concurrency (10-20% of test cases)
- Security Scenarios: Authentication bypasses, injection attacks, data leakage (if relevant)

STEP 3 - Test Case Distribution:
For {{ numberOfTestCases }} test cases, distribute as follows:
- High Priority: Focus on critical happy paths and high-impact error scenarios
- Medium Priority: Add negative scenarios and important edge cases
- Based on Test Type ({{ testType }}):
  * Functional: Focus on feature behavior validation
  * Security: Include injection, authentication, authorization tests
  * Performance: Include load, stress, and scalability scenarios
  * UI: Include layout, responsiveness, accessibility checks

STEP 4 - Test Step Design:
For each test case:
- Break down into 3-8 clear, executable steps
- Each step should have ONE action and ONE expected result
- Use specific data values, not placeholders like "valid data"
- Include preconditions and post-conditions explicitly
- Consider dependencies between steps

**FEW-SHOT EXAMPLES:**

Example 1:
Input:
- Feature: User Login
- Description: Users should be able to log in using email and password
- Acceptance Criteria: Valid credentials grant access; Invalid credentials show error; Account locked after 5 failed attempts
- Test Type: Functional
- Priority: High
- Number of Cases: 5

Output:
[
  {
    "name": "Successful Login with Valid Credentials",
    "description": "Verify that a user with valid email and password can successfully log in and is redirected to the dashboard",
    "steps": [
      {
        "id": "step_1",
        "action": "Navigate to the login page (https://app.example.com/login)",
        "expectedResult": "Login page loads successfully with email and password fields visible",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Enter valid email 'testuser@example.com' in the email field",
        "expectedResult": "Email is accepted without validation errors",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Enter valid password 'SecurePass123!' in the password field",
        "expectedResult": "Password field shows masked characters (dots)",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "Click the 'Login' button",
        "expectedResult": "User is authenticated and redirected to the dashboard page within 2 seconds",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Verify user's name 'Test User' appears in the top-right corner",
        "expectedResult": "User's name is displayed correctly indicating successful authentication",
        "order": 5
      }
    ],
    "expectedResult": "User successfully logs in and accesses the dashboard with personalized greeting",
    "priority": "High",
    "estimatedTime": "3 min",
    "category": "Authentication",
    "tags": ["login", "positive-scenario", "smoke-test", "critical-path"]
  },
  {
    "name": "Login Failure with Invalid Password",
    "description": "Verify that entering an incorrect password displays an appropriate error message and does not grant access",
    "steps": [
      {
        "id": "step_1",
        "action": "Navigate to the login page",
        "expectedResult": "Login page loads successfully",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Enter valid email 'testuser@example.com'",
        "expectedResult": "Email field accepts the input",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Enter invalid password 'WrongPassword123'",
        "expectedResult": "Password field accepts the input (masked)",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "Click the 'Login' button",
        "expectedResult": "Error message 'Invalid email or password' is displayed below the login form in red text",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Verify user remains on the login page",
        "expectedResult": "User is not redirected, stays on login page with form fields cleared except email",
        "order": 5
      }
    ],
    "expectedResult": "Login is denied with clear error messaging and no access granted",
    "priority": "High",
    "estimatedTime": "2 min",
    "category": "Authentication",
    "tags": ["login", "negative-scenario", "error-handling", "security"]
  },
  {
    "name": "Account Lockout After Multiple Failed Login Attempts",
    "description": "Verify that after 5 consecutive failed login attempts, the user account is temporarily locked and displays lockout message",
    "steps": [
      {
        "id": "step_1",
        "action": "Navigate to the login page",
        "expectedResult": "Login page loads successfully",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Enter valid email 'testuser@example.com' and invalid password 'WrongPass1', click Login",
        "expectedResult": "Error message displayed: 'Invalid email or password (Attempt 1 of 5)'",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Repeat step 2 with different wrong passwords 4 more times",
        "expectedResult": "After each attempt, counter increments: 'Attempt 2 of 5', 'Attempt 3 of 5', etc.",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "On the 5th failed attempt, observe the error message",
        "expectedResult": "Error message changes to: 'Your account has been locked due to multiple failed login attempts. Please try again in 15 minutes or reset your password.'",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Attempt to login again immediately with correct credentials",
        "expectedResult": "Login is blocked with message 'Account is temporarily locked. Try again at [timestamp]'",
        "order": 5
      },
      {
        "id": "step_6",
        "action": "Wait 15 minutes, then attempt login with correct credentials",
        "expectedResult": "Login succeeds and user is redirected to dashboard",
        "order": 6
      }
    ],
    "expectedResult": "Account lockout mechanism activates after 5 failed attempts, prevents brute force attacks, and auto-unlocks after 15 minutes",
    "priority": "High",
    "estimatedTime": "20 min",
    "category": "Security",
    "tags": ["login", "security", "brute-force-protection", "account-lockout", "edge-case"]
  },
  {
    "name": "Login with Empty Email Field",
    "description": "Verify that attempting to login without entering an email address displays a validation error",
    "steps": [
      {
        "id": "step_1",
        "action": "Navigate to the login page",
        "expectedResult": "Login page loads successfully",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Leave the email field empty",
        "expectedResult": "Email field remains blank",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Enter valid password 'SecurePass123!' in password field",
        "expectedResult": "Password field accepts input",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "Click the 'Login' button",
        "expectedResult": "Validation error appears below email field: 'Email address is required' in red text",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Verify that login is not processed",
        "expectedResult": "No API call is made, user remains on login page, no authentication attempt",
        "order": 5
      }
    ],
    "expectedResult": "Form validation prevents login attempt when required email field is empty",
    "priority": "Medium",
    "estimatedTime": "2 min",
    "category": "Validation",
    "tags": ["login", "validation", "negative-scenario", "empty-field"]
  },
  {
    "name": "Login with SQL Injection Attempt in Email Field",
    "description": "Verify that SQL injection attempts in the email field are properly sanitized and do not compromise security or cause errors",
    "steps": [
      {
        "id": "step_1",
        "action": "Navigate to the login page",
        "expectedResult": "Login page loads successfully",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Enter SQL injection payload in email field: ' OR '1'='1' --",
        "expectedResult": "Email field accepts the input",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Enter any value in password field: 'test123'",
        "expectedResult": "Password field accepts the input",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "Click the 'Login' button",
        "expectedResult": "Application returns 'Invalid email or password' error, does not grant access",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Check browser console and server logs for any SQL errors or exceptions",
        "expectedResult": "No SQL error messages or stack traces are exposed; input is properly sanitized",
        "order": 5
      }
    ],
    "expectedResult": "SQL injection attack is prevented through proper input sanitization, no unauthorized access granted, no error information leaked",
    "priority": "High",
    "estimatedTime": "4 min",
    "category": "Security",
    "tags": ["login", "security", "sql-injection", "owasp", "penetration-test"]
  }
]

---

Example 2 (Different Feature Type):
Input:
- Feature: Shopping Cart - Add Item
- Description: Users should be able to add products to their shopping cart from the product detail page
- Acceptance Criteria: Item added with correct quantity; Cart badge updates; Out-of-stock items show warning; Maximum 10 items per product
- Test Type: Functional
- Priority: High
- Number of Cases: 4

Output:
[
  {
    "name": "Add Single Item to Empty Shopping Cart",
    "description": "Verify that adding a product to an empty shopping cart successfully adds the item with quantity 1 and updates the cart badge",
    "steps": [
      {
        "id": "step_1",
        "action": "Navigate to product detail page for 'Wireless Headphones' (SKU: WH-001) while logged in",
        "expectedResult": "Product page loads showing product image, price ($99.99), and 'Add to Cart' button",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Verify cart badge in header shows '0' items",
        "expectedResult": "Cart icon displays '0' indicating empty cart",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Click the 'Add to Cart' button without changing quantity (default: 1)",
        "expectedResult": "Success message appears: 'Wireless Headphones added to your cart', button changes to 'Added' with checkmark icon for 2 seconds",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "Observe cart badge update in header",
        "expectedResult": "Cart badge updates from '0' to '1' immediately",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Click on cart icon to view cart contents",
        "expectedResult": "Cart page displays 'Wireless Headphones' with quantity '1', unit price '$99.99', and subtotal '$99.99'",
        "order": 5
      }
    ],
    "expectedResult": "Product is successfully added to cart with correct details, cart count updates immediately, and user receives confirmation",
    "priority": "High",
    "estimatedTime": "3 min",
    "category": "Shopping Cart",
    "tags": ["add-to-cart", "positive-scenario", "smoke-test", "e-commerce"]
  },
  {
    "name": "Add Out-of-Stock Item to Cart",
    "description": "Verify that attempting to add an out-of-stock product displays a warning message and does not add the item to the cart",
    "steps": [
      {
        "id": "step_1",
        "action": "Navigate to product detail page for 'Limited Edition Watch' (SKU: LE-500) marked as 'Out of Stock'",
        "expectedResult": "Product page loads with 'Out of Stock' label in red, 'Add to Cart' button is disabled and grayed out",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Verify current cart count is '1' from previous test",
        "expectedResult": "Cart badge shows '1' item",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Attempt to click the disabled 'Add to Cart' button",
        "expectedResult": "Button is unresponsive, no action triggered",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "Observe notification message below the button",
        "expectedResult": "Warning message displayed: 'This item is currently out of stock. Click 'Notify Me' to receive an alert when it's available.'",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Navigate to cart page",
        "expectedResult": "Cart still shows only '1' item (Wireless Headphones), out-of-stock item was not added",
        "order": 5
      }
    ],
    "expectedResult": "Out-of-stock items cannot be added to cart, appropriate warning message is displayed, cart count remains unchanged",
    "priority": "High",
    "estimatedTime": "3 min",
    "category": "Shopping Cart",
    "tags": ["add-to-cart", "negative-scenario", "out-of-stock", "inventory"]
  },
  {
    "name": "Exceed Maximum Quantity Limit (Boundary Test)",
    "description": "Verify that attempting to add more than 10 units of a single product displays a validation error and enforces the maximum limit",
    "steps": [
      {
        "id": "step_1",
        "action": "Navigate to product detail page for 'USB Cable' (SKU: USB-C-01)",
        "expectedResult": "Product page loads with quantity selector defaulting to '1'",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Change quantity selector to '10' (maximum allowed)",
        "expectedResult": "Quantity field accepts '10' without error",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Click 'Add to Cart' button",
        "expectedResult": "Success message: '10 x USB Cable added to your cart', cart badge updates correctly",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "Remain on the same product page, change quantity selector to '11'",
        "expectedResult": "Validation error appears below quantity field: 'Maximum 10 units allowed per product'",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Attempt to click 'Add to Cart' button with quantity '11'",
        "expectedResult": "'Add to Cart' button is disabled, cannot be clicked, error message persists",
        "order": 5
      },
      {
        "id": "step_6",
        "action": "Change quantity back to '10' or less (e.g., '5')",
        "expectedResult": "Validation error disappears, 'Add to Cart' button becomes enabled again",
        "order": 6
      }
    ],
    "expectedResult": "System enforces maximum quantity limit of 10 units per product, displays clear validation error, and prevents adding excess quantity",
    "priority": "Medium",
    "estimatedTime": "4 min",
    "category": "Shopping Cart",
    "tags": ["add-to-cart", "boundary-test", "validation", "quantity-limit"]
  },
  {
    "name": "Add Same Item Multiple Times (Quantity Aggregation)",
    "description": "Verify that adding the same product to cart multiple times correctly aggregates the quantity instead of creating duplicate entries",
    "steps": [
      {
        "id": "step_1",
        "action": "Empty the cart by removing all existing items",
        "expectedResult": "Cart is empty, cart badge shows '0'",
        "order": 1
      },
      {
        "id": "step_2",
        "action": "Navigate to product 'Bluetooth Speaker' (SKU: BT-SPK-200), add quantity '3' to cart",
        "expectedResult": "Success message displayed, cart badge updates to '3'",
        "order": 2
      },
      {
        "id": "step_3",
        "action": "Remain on the same product page, add quantity '2' to cart again",
        "expectedResult": "Success message displayed, cart badge updates to '5' (3 + 2)",
        "order": 3
      },
      {
        "id": "step_4",
        "action": "Navigate to cart page",
        "expectedResult": "Cart displays ONE entry for 'Bluetooth Speaker' with quantity '5', unit price '$45.00', subtotal '$225.00' (5 x $45)",
        "order": 4
      },
      {
        "id": "step_5",
        "action": "Verify no duplicate entries exist for the same product",
        "expectedResult": "Only one line item for 'Bluetooth Speaker' is present in the cart",
        "order": 5
      }
    ],
    "expectedResult": "Adding the same product multiple times aggregates quantity in a single cart entry, calculates subtotal correctly, and avoids duplicates",
    "priority": "High",
    "estimatedTime": "4 min",
    "category": "Shopping Cart",
    "tags": ["add-to-cart", "quantity-aggregation", "positive-scenario", "data-integrity"]
  }
]

**GENERATION INSTRUCTIONS:**

Generate exactly {{ numberOfTestCases }} test cases for the feature "{{ feature }}". Follow these requirements:

1. **Test Case Distribution:**
   - Positive Scenarios (40-50%): Validate happy paths and typical user workflows
   - Negative Scenarios (30-40%): Invalid inputs, error conditions, denied actions
   - Edge/Boundary Cases (10-20%): Boundary values, special characters, concurrency, empty/null data
   - If Test Type is "Security": Include injection attacks, authentication bypasses, authorization checks
   - If Test Type is "Performance": Include load, response time, resource usage scenarios
   - If Complexity is "High": Increase focus on edge cases and integration scenarios

2. **Test Case Naming:**
   - Format: "[Action] with [Condition/Context]"
   - Examples: "Successful Login with Valid Credentials", "Payment Failure with Expired Card", "Search Results with Special Characters"
   - Be specific and descriptive (5-10 words)
   - Avoid generic names like "Test Case 1" or "Basic Test"

3. **Test Case Description:**
   - 1-2 sentences explaining what the test validates
   - Include the expected behavior or business rule being tested
   - Mention if it's testing a positive scenario, negative scenario, or edge case

4. **Test Steps (3-8 steps per test case):**
   - Each step must have:
     * Unique step ID (e.g., "step_1", "step_2")
     * Specific action with concrete data values (e.g., "Enter email 'test@example.com'" not "Enter valid email")
     * Expected result after performing the action
     * Sequential order number
   - First step should establish preconditions
   - Last step should verify the final outcome
   - Use realistic, domain-appropriate test data
   - For boundary tests, use exact boundary values (e.g., 0, 1, max-1, max, max+1)

5. **Expected Results:**
   - Overall expected result: 1-2 sentences describing the complete outcome of the test
   - Must be objectively verifiable (measurable or observable)
   - Include both functional outcome and user feedback (error messages, success notifications)

6. **Priority Assignment:**
   - High: Critical path, core functionality, security-critical tests
   - Medium: Important but not critical, negative scenarios, validation tests
   - Low: Nice-to-have, cosmetic, rarely used features
   - Align priority with the feature's overall priority ({{ priority }})

7. **Estimated Time:**
   - Provide realistic execution time: "2 min", "5 min", "15 min"
   - Consider setup, execution, and verification time
   - Longer for complex scenarios with multiple integrations

8. **Category:**
   - Assign a category based on Test Type: {{ testType }}
   - Examples: "Authentication", "Shopping Cart", "Payment Processing", "Security", "Performance", "API", "UI"
   - Use business-aligned categories, not technical jargon

9. **Tags (3-6 tags per test case):**
   - Include: scenario type (positive-scenario, negative-scenario, edge-case)
   - Feature/module name
   - Technical aspects (e.g., "sql-injection", "boundary-test", "api", "ui")
   - Test classifications (e.g., "smoke-test", "regression", "critical-path")
   - Domain-specific tags relevant to the project

10. **Contextual Awareness:**
    - Reference the User Story and Acceptance Criteria explicitly
    - If platform is "Mobile", include touch interactions, offline scenarios, push notifications
    - If platform is "Web", include browser-specific behaviors, responsive design
    - If project type is healthcare/finance, include data privacy and security tests
    - Tailor test data to be realistic for the domain (e.g., medical data for healthcare apps)

**VALIDATION RULES:**
- Each test case must have 3-8 steps (no more, no less)
- All test data must be specific and realistic (no placeholders like "valid input")
- Expected results must be objectively verifiable
- Test case names must be unique within the set
- At least 40% should be positive scenarios, at least 30% negative scenarios
- If acceptance criteria provided, at least one test case per criterion
- Tags must include scenario type (positive/negative/edge-case)

**OUTPUT FORMAT:**
Return ONLY a valid JSON array with this exact structure (no additional text):
[
  {
    "name": "Test case name",
    "description": "Test case description",
    "steps": [
      {
        "id": "step_1",
        "action": "Specific action to perform",
        "expectedResult": "Expected outcome",
        "order": 1
      }
    ],
    "expectedResult": "Overall expected result",
    "priority": "High|Medium|Low",
    "estimatedTime": "X min",
    "category": "Category name",
    "tags": ["tag1", "tag2", "tag3"]
  }
]

**QUALITY STANDARDS:**
- Specificity: Use concrete data values, URLs, field names
- Executability: Any tester should be able to follow steps without ambiguity
- Completeness: Cover positive, negative, and edge scenarios
- Realism: Test data should reflect actual use cases
- Traceability: Link to acceptance criteria and user story
- Maintainability: Clear, structured format easy to update

Apply the reasoning framework systematically. Generate the test cases now.
